#第一章 概述
## 1.2 GNU make介绍
### 1.2.1 Makefile简介

当使用 make 工具进行编译时，工程中以下几种文件在执行 make 时将会被编译（重新编译）：

1. 所有的源文件没有被编译过，则对各个 C 源文件进行编译并进行链接，生成最后的可执行程序；

2. 每一个在上次执行 make 之后修改过的 C 源代码文件在本次执行 make 时将会被重新编译

3. 头文件在上一次执行 make 之后被修改。则所有包含此头文件的 C 源文件在本次执行 make 时将会被重新编译。

结果就是新编译的.o文件会和不需要重编译的.o文件连接并生成执行文件。

> 个人想法：
> 
> 当修改了.c和.h之后，make会按照makefile的内容重新编译出最新的.o文件，并且连接生成执行文件。
> 
> 修改.c和.h的情况多种多样，比如说：删除了某个.h文件、从.c里面取消了某些include、单纯修改了.c函数等等，要验证一个makefile写的好不好，就是看它有没很好的兼容这些情况，如果兼容性很好，那么开发者在修改完.c或者.h之后，不需要修改makefile的内容，直接使用gnu make就可以生成最新的执行文件。

### 1.2.2 Makefile规则介绍

makefile中有一个概念叫“规则”，makefile就是一大堆规则组成的文件，一个普通的规则结构如下：

	TARGET...:PREREQUISTIES...
		COMMAND
		...
		...

TARGET：规则的目标。目标分两类，一类是文件，另一类是伪目标，而伪目标没有任何依赖只有执行动作。当TARGET是文件时，代表这个规则执行的目的，就是执行这个规则的目标就是要生成/更新这个TARGET文件；而伪目标更像是一个命令标志，当在shell执行 make TARGET(伪目标) 时候，会执行这个规则里面的COMMAND。

PREREQUISTIES：规则的依赖。当TARGET是文件时候，要生成/更新TARGET时，首先需要保证这些依赖文件必须是最新的，如果这些PREREQUISTIES不是最新的，需要先更新，然后再执行COMMAND生成/更新最新的TARGET。

COMMAND：规则的命令行。shell命令。

总的来说：**规则包含了目标和依赖的关系以及更新目标所要求的命令**。





